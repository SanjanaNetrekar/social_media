<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>InstaLite — Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="app-bg">
  <main class="auth-wrap">
    <div class="auth-card">
      <div class="auth-left">
        <img src="/mnt/data/a2ec838d-f32b-43e1-8b47-ff7434b1674c.png" alt="InstaLite" class="auth-illustration">
      </div>
      <div class="auth-right">
        <div class="logo-square">IL</div>
        <h1>InstaLite</h1>
        <p class="muted small">Mini social • colorful UI</p>

        <form id="loginForm" onsubmit="return doLogin(event)" style="width:100%;margin-top:12px">
          <input id="email" class="input" placeholder="Email" required>
          <input id="password" class="input" placeholder="Password" type="password" required>
          <button class="btn gradient full" type="submit">Log in</button>
        </form>

        <div style="margin-top:12px" class="muted small">Don't have account? <a class="link" href="register.html">Create</a></div>
      </div>
    </div>
  </main>

<script>
const API = 'http://localhost:3000';
async function doLogin(e){
  e.preventDefault();
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  try{
    const r = await fetch(API + '/login', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email, password }) });
    if(!r.ok){ alert('Login failed'); return; }
    const j = await r.json();
    // store user in localStorage as before (UI-only change)
    localStorage.setItem('user', JSON.stringify(j.user || j));
    location.href = 'feed.html';
  }catch(err){ console.error('login', err); alert('Login error'); }
}
</script>
</body>
</html>
